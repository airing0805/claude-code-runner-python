# 任务模板

## 概述

支持创建和复用任务模板，提高效率。

## 需求

### 8.1 模板 CRUD

| 操作 | 方法 | 路径 |
|------|------|------|
| 创建模板 | POST | /api/templates |
| 列表模板 | GET | /api/templates |
| 获取模板 | GET | /api/templates/{id} |
| 更新模板 | PUT | /api/templates/{id} |
| 删除模板 | DELETE | /api/templates/{id} |

### 8.2 模板结构

```json
{
  "id": "uuid",
  "name": "代码审查",
  "description": "对代码进行安全审查",
  "prompt_template": "请审查以下代码的安全问题：\n{{code}}",
  "default_tools": ["Read", "Grep"],
  "default_working_dir": "{{workspace}}",
  "variables": [
    {"name": "code", "label": "代码内容", "type": "textarea"},
    {"name": "workspace", "label": "工作目录", "type": "text", "default": "."}
  ],
  "created_at": "2024-01-01T00:00:00Z",
  "is_public": false
}
```

### 8.3 模板市场

- 预设常用模板（代码审查、性能分析、文档生成等）
- 支持导入/导出模板
- 公开模板可被其他用户使用

### 8.4 使用方式

```json
# 使用模板创建任务
POST /api/task
{
  "template_id": "uuid",
  "variables": {
    "code": "def hello(): pass"
  }
}

# 或通过 Web 界面选择模板并填写变量
```

## 实现

- 模板存储在 SQLite
- 变量替换使用 Jinja2
- 模板验证确保变量完整
