# Web 界面

## 2.1 整体布局

- 左侧：可收起的导航菜单（200px，可收起至 56px）
- 右侧：内容区域，根据菜单切换显示不同视图

## 2.2 导航菜单

| 菜单项 | 图标 | 功能 |
|--------|------|------|
| 当前会话 | 💬 | 任务执行主界面 |
| 历史记录 | 📜 | 查看历史会话 |
| 示例任务 | 📋 | 快速填充任务示例 |

## 2.3 当前会话视图（三区布局）

```
┌─────────────────────────────────────┐
│ 标题栏：菜单按钮 + 标题              │
├─────────────────────────────────────┤
│ 标签页栏：新任务 / 会话标签          │
├─────────────────────────────────────┤
│ 信息栏：工作目录(下拉)、会话ID、     │
│         工具权限(多选   │
│         新会话按钮                  )、继续会话、 │
├─────────────────────────────────────┤
│                                     │
│        会话过程显示区                │
│        （消息流、工具调用等）         │
│        自动滚动到最新消息            │
│                                     │
├─────────────────────────────────────┤
│ 统计信息：状态、耗时、费用、会话ID   │
├─────────────────────────────────────┤
│ 输入区：文本框 + 执行/停止/清空按钮  │
└─────────────────────────────────────┘
```

**交互行为**：
- 会话过程显示区在有新消息时自动滚动到底部，确保用户始终看到最新内容
- 清空按钮清除当前显示的消息和统计信息，但不影响会话 ID（会话仍可继续）
- 统计信息区的会话 ID 可点击复制到剪贴板

## 2.4 标签页系统

- 默认显示"新任务"标签
- 点击"继续此会话"时创建会话标签
- 点击"新会话"按钮创建新的任务标签
- 每个标签存储会话 ID、历史消息和工作目录
- **切换标签行为**：
  - 切换标签时自动恢复对应的会话信息（会话ID、工作目录、历史消息）
  - 切换到新任务标签时清空显示，重置输入状态
  - 从历史会话继续时正确回填工作目录
- 标签可关闭（默认的新任务标签除外）
- **会话状态更新**：执行完成后自动更新标签标题为会话描述

## 2.5 会话字段管理

- **工作目录选择**：可编辑的组合框（combo box），支持从项目列表选择或手动输入任意路径 (v0.2.5+)
- **会话ID显示**：位于工作目录右侧，只读显示
- **字段锁定规则**：
  - 新会话：工作目录可选择或手动输入，会话ID显示"新会话"
  - 历史会话：工作目录和会话ID自动锁定（禁用编辑），确保会话上下文一致
  - 执行完成后：自动锁定工作目录和会话ID字段
- **历史会话回填**：从历史记录继续会话时，自动回填对应的工作目录路径
- **悬停提示**：鼠标悬停时显示完整内容（工作目录路径、会话ID）

## 2.6 工具权限选择

- **多选下拉框组件**：替代原有的文本输入
- **两列布局**：一行显示 2 个工具选项，提升操作效率 (v0.2.5+)
- 显示已选工具数量徽章
- 支持全选/取消选择
- 点击外部自动关闭下拉框

## 2.7 新会话按钮

- 位置：信息栏最右侧
- 功能：点击创建新的标签页，重置所有输入状态
- 样式：紫色边框按钮，悬停时背景变紫

## 2.8 历史记录视图

- **统一页面布局**：与当前会话视图一致的头部样式（包含菜单按钮和标题栏）
- **自适应窗口宽度**：内容区域填充整个可用空间，无固定宽度限制
- **第一级**：项目列表
  - 显示所有有会话记录的项目
  - 显示项目路径和会话数量
  - 显示项目已使用的工具列表
  - **每行提供"新会话"按钮** (v0.2.3+)：点击直接创建新会话并设置工作目录
- **第二级**：会话列表
  - 选择项目后显示该项目的会话
  - 显示会话标题、时间、消息数量
  - 提供"继续此会话"按钮
- **数据刷新**：切换到历史视图时强制重新加载数据，确保显示最新的会话记录

## 2.9 示例任务视图

- **统一页面布局**：与当前会话视图一致的头部样式（包含菜单按钮和标题栏）
- **自适应窗口宽度**：内容区域填充整个可用空间，无固定宽度限制
- 网格布局展示示例任务卡片
- 点击卡片自动跳转到当前会话并填充任务描述
- 示例任务包括：
  - 列出 Python 文件
  - 总结代码功能
  - 查找 TODO
  - 生成 README
  - 安全检查
  - 性能优化
