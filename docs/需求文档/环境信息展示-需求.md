# v0.3.1 - 环境信息展示

## 1. 功能概述

在 Web 页面上展示 Claude Code 的基本环境信息，包括 Claude CLI 版本、相关环境变量、配置文件等，让用户无需使用命令行即可查看 Claude Code 的运行状态。

## 2. 用户场景

| 场景 | 描述 |
|------|------|
| 查看 Claude 版本 | 用户想确认当前运行的 Claude Code 版本号 |
| 查看环境变量 | 用户想了解 Claude Code 使用的环境变量配置 |
| 查看工作目录 | 用户想确认当前配置的 working directory |
| 诊断问题 | 用户遇到问题时，查看环境配置进行排查 |

## 3. 功能列表

### 3.1 Claude 版本信息

- 显示 Claude Code CLI 版本号
- 显示 SDK 版本号
- 显示运行环境（OS、Python 版本等）

### 3.2 环境变量

- 展示与 Claude Code 相关的环境变量
- 敏感信息（API Key）显示为掩码
- 允许用户复制变量名

### 3.3 配置信息

- 当前工作目录
- 默认权限模式
- 可用工具列表

## 4. 验收标准

### 4.1 功能验收

- [x] 访问 `/api/claude/version` 返回正确的版本信息
- [x] 访问 `/api/claude/env` 返回环境变量（敏感值已隐藏）
- [x] 访问 `/api/claude/config` 返回当前配置
- [x] 前端页面正确显示以上信息
- [x] 无需登录即可访问 Claude 状态页面

### 4.2 UI 验收

- [x] 左侧导航显示「Claude 状态」入口
- [x] 页面布局清晰，信息分区块展示
- [x] 敏感信息显示为 `***` 或部分掩码
- [x] 页面响应流畅，无明显加载延迟

### 4.3 安全验收

- [x] API Key 等敏感信息不暴露
- [x] 环境变量仅返回与 Claude Code 相关的变量

### 4.4 测试验收

- [x] 后端 API 单元测试通过（tests/test_claude_env.py）
- [x] 敏感信息隐藏函数测试通过
- [x] API 端点测试通过
- [x] 安全测试通过 - 无明文敏感数据
- [x] 性能测试通过 - 响应时间 < 100ms
