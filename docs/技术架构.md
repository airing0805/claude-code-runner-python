# 技术架构

## 项目结构 (v0.2.3+, v0.2.15+)

```
claude-code-runner/
├── app/
│   ├── main.py              # FastAPI 应用入口
│   ├── claude_runner/       # Claude Code SDK 封装 (v0.2.3+)
│   │   ├── __init__.py
│   │   └── client.py
│   └── routers/
│       ├── task.py          # 任务执行 API
│       ├── session.py       # 会话历史 API
│       └── status.py        # 状态和工具 API
├── web/                     # 前端资源 (v0.2.2+)
│   ├── templates/
│   │   └── index.html       # 主页面模板
│   └── static/
│       ├── app.js           # 前端交互逻辑主入口 (v0.2.15+)
│       ├── constants.js     # 常量定义 (v0.2.15+)
│       ├── utils.js         # 工具函数 (v0.2.15+)
│       ├── components/      # UI 组件 (v0.2.15+)
│       │   ├── toolsMultiselect.js  # 工具多选组件
│       │   └── tabs.js              # 标签页组件
│       └── modules/         # 功能模块 (v0.2.15+)
│           ├── navigation.js        # 导航和视图切换
│           ├── workingDir.js       # 工作目录管理
│           ├── session.js          # 会话管理
│           ├── history.js          # 历史记录管理
│           ├── task.js             # 任务执行
│           └── messageRenderer.js  # 消息渲染
│       └── style.css        # 样式表
└── tests/
    └── test_runner.py       # 测试用例
```

## 后端

- **框架**: FastAPI + Uvicorn
- **SDK**: claude-code-sdk
- **模板**: Jinja2

## 前端

- **纯 JavaScript** (无框架)
- **CSS**: 自定义 CSS 变量主题
- **通信**: Fetch API + SSE

## 数据存储

- 会话记录存储在 `~/.claude/projects/<encoded-path>/*.jsonl`
- 项目目录名使用编码后的路径（如 `E--workspaces-2026-python`）
