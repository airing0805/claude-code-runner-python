/* ============== v0.5.1 通用组件样式 ============== */

/* 卡片容器 - 半透明背景 + 边框 + 圆角 */
.card {
    background: color-mix(in srgb, var(--zinc-900) 70%, transparent); /* 替换原来的 rgba(24, 24, 27, 0.7) */
    border: 1px solid color-mix(in srgb, var(--zinc-700) 50%, transparent); /* 替换原来的 rgba(63, 63, 70, 0.5) */
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: border-color var(--transition-normal), box-shadow var(--transition-normal);
}

.card:hover {
    border-color: color-mix(in srgb, var(--zinc-700) 70%, transparent);
}

/* 卡片标题栏 - flex 布局 + 底部边框 */
.card-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-bottom: 1px solid color-mix(in srgb, var(--zinc-700) 50%, transparent);
    background: color-mix(in srgb, var(--zinc-800) 30%, transparent); /* 替换原来的 rgba(39, 39, 42, 0.3) */
}

.card-header-title {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--zinc-300);
}

.card-header-icon {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

.card-header-meta {
    font-size: 0.75rem;
    color: var(--zinc-500);
    margin-left: auto;
}

/* 卡片内容区 */
.card-body {
    padding: 12px;
}

/* 工具按钮 - 小尺寸 + hover 效果 */
.btn-tool {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    border: none;
    border-radius: var(--radius-sm);
    background: transparent;
    color: var(--zinc-500);
    cursor: pointer;
    transition: background var(--transition-fast), color var(--transition-fast);
}

.btn-tool:hover {
    background: color-mix(in srgb, var(--zinc-700) 50%, transparent); /* 替换原来的 rgba(63, 63, 70, 0.5) */
    color: var(--zinc-300);
}

.btn-tool:active {
    background: color-mix(in srgb, var(--zinc-700) 70%, transparent);
}

.btn-tool:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--violet-500);
}

.btn-tool-icon {
    width: 12px;
    height: 12px;
}

/* 工具按钮 - 复制成功状态 */
.btn-tool.copied {
    color: var(--emerald-400);
}

/* 标签样式 */
.tag {
    display: inline-flex;
    align-items: center;
    padding: 2px 6px;
    font-size: 0.75rem;
    border-radius: var(--radius-sm);
    background: color-mix(in srgb, var(--zinc-700) 50%, transparent);
    color: var(--zinc-400);
}

.tag-primary {
    background: color-mix(in srgb, var(--violet-500) 20%, transparent);
    color: var(--violet-400);
}

.tag-success {
    background: color-mix(in srgb, var(--emerald-500) 20%, transparent);
    color: var(--emerald-400);
}

.tag-warning {
    background: color-mix(in srgb, var(--amber-400) 20%, transparent);
    color: var(--amber-400);
}

.tag-error {
    background: color-mix(in srgb, var(--rose-400) 20%, transparent);
    color: var(--rose-400);
}

.tag-info {
    background: color-mix(in srgb, var(--cyan-400) 20%, transparent);
    color: var(--cyan-400);
}

/* 分割线 */
.divider {
    height: 1px;
    background: color-mix(in srgb, var(--zinc-700) 50%, transparent);
    margin: 8px 0;
}

/* 图标颜色变量 */
.icon-cyan {
    color: var(--cyan-400);
}

.icon-violet {
    color: var(--violet-400);
}

.icon-amber {
    color: var(--amber-400);
}

.icon-emerald {
    color: var(--emerald-400);
}

.icon-rose {
    color: var(--rose-400);
}

.icon-sky {
    color: var(--sky-400);
}

/* ============== 表单 ============== */
.form-group {
    margin-bottom: 16px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--text-muted);
    font-size: 0.9rem;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-color);
    color: var(--text-color);
    font-size: 1rem;
    transition: border-color 0.2s;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

.form-group textarea {
    resize: vertical;
    font-family: inherit;
}

/* Checkbox 样式 */
.checkbox-label {
    display: flex !important;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--primary-color);
}

.hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 4px;
    margin-bottom: 0;
}

/* ============== 按钮 ============== */
.button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-primary {
    background: var(--primary-color);
    color: white;
}

.btn-primary:hover:not(:disabled) {
    background: var(--primary-hover);
}

.btn-secondary {
    background: var(--border-color);
    color: var(--text-color);
}

.btn-secondary:hover:not(:disabled) {
    background: var(--zinc-600); /* 替换原来的 #475569 */
}

.btn-danger {
    background: var(--danger-color);
    color: white;
}

.btn-danger:hover:not(:disabled) {
    background: var(--rose-600); /* 替换原来的 #dc2626 */
}

.btn-stop {
    background: var(--zinc-500); /* 替换原来的 #6b7280 */
    color: white;
}

.btn-stop:hover:not(:disabled) {
    background: var(--zinc-600); /* 替换原来的 #4b5563 */
}

.btn-example {
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-muted);
    font-size: 0.9rem;
}

.btn-example:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
}

.example-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

/* ============== 输出区 ============== */
.output-container {
    background: var(--bg-color);
    border-radius: 8px;
    padding: 16px;
    min-height: 300px;
    max-height: 500px;
    overflow-y: auto;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
}

.output-placeholder {
    color: var(--text-muted);
    text-align: center;
    padding: 100px 0;
}

/* ============== 消息样式 ============== */
.message {
    padding: 8px 12px;
    margin-bottom: 8px;
    border-radius: 6px;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.message-text {
    background: color-mix(in srgb, var(--sky-800) 30%, transparent); /* 替换原来的 #1e40af */
    border-left: 3px solid var(--sky-500); /* 替换原来的 #3b82f6 */
}

.message-tool_use {
    background: color-mix(in srgb, var(--emerald-800) 30%, transparent); /* 替换原来的 #065f46 */
    border-left: 3px solid var(--emerald-500); /* 替换原来的 #10b981 */
}

.message-error {
    background: color-mix(in srgb, var(--rose-900) 30%, transparent); /* 替换原来的 #7f1d1d */
    border-left: 3px solid var(--rose-500); /* 替换原来的 #ef4444 */
}

.message-complete {
    background: color-mix(in srgb, var(--sky-900) 30%, transparent); /* 替换原来的 #1e3a5f */
    border-left: 3px solid var(--sky-400); /* 替换原来的 #60a5fa */
}

.message-info {
    background: color-mix(in srgb, var(--sky-900) 30%, transparent);
    border-left: 3px solid var(--sky-500);
    color: var(--sky-300);
}

.message .timestamp {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-right: 10px;
}

.message .content {
    white-space: pre-wrap;
    word-break: break-word;
}

.message .tool-info {
    color: #a7f3d0;
    font-size: 0.85rem;
}

/* ============== 统计信息 ============== */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
}

.stat-card {
    background: var(--bg-color);
    padding: 16px;
    border-radius: 8px;
    text-align: center;
}

.stat-label {
    display: block;
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--sky-400); /* 替换原来的 #38bdf8 */
}

.stat-session {
    font-size: 0.9rem;
    cursor: pointer;
    word-break: break-all;
}

.stat-session:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}

/* ============== 多轮对话样式 ============== */
.conversation-round {
    margin-bottom: 20px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
    background: var(--card-bg);
}

.round-header {
    background: var(--bg-color);
    padding: 8px 12px;
    border-bottom: 1px solid var(--border-color);
    font-size: 0.8rem;
    color: var(--text-muted);
}

.round-number {
    font-weight: 500;
}

.round-user {
    padding: 12px 16px;
    background: rgba(124, 58, 237, 0.05);
    border-bottom: 1px solid var(--border-color);
}

.round-assistant {
    padding: 12px 16px;
    background: var(--bg-color);
}

.message-role {
    font-size: 0.8rem;
    font-weight: 500;
    margin-bottom: 8px;
    color: var(--text-muted);
}

.user-role {
    color: var(--sky-400); /* 替换原来的 #38bdf8 */
}

.assistant-role {
    color: var(--success-color);
}

.message-content {
    white-space: pre-wrap;
    word-break: break-word;
    color: var(--text-color);
}

.user-content {
    background: transparent;
}

.assistant-messages {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.assistant-msg {
    padding: 8px 12px;
    border-radius: 6px;
    border-left: 3px solid transparent;
}

.assistant-msg-text {
    background: color-mix(in srgb, var(--sky-700) 20%, transparent); /* 替换原来的 rgba(59, 130, 246, 0.1) */
    border-left-color: var(--sky-500); /* 替换原来的 #3b82f6 */
}

.assistant-msg-tool_use {
    background: color-mix(in srgb, var(--emerald-500) 20%, transparent); /* 替换原来的 rgba(16, 185, 129, 0.1) */
    border-left-color: var(--emerald-500); /* 替换原来的 #10b981 */
}

.assistant-msg-error {
    background: color-mix(in srgb, var(--rose-500) 20%, transparent); /* 替换原来的 rgba(239, 68, 68, 0.1) */
    border-left-color: var(--rose-500); /* 替换原来的 #ef4444 */
}

.assistant-msg-complete {
    background: color-mix(in srgb, var(--sky-400) 20%, transparent); /* 替换原来的 rgba(96, 165, 250, 0.1) */
    border-left-color: var(--sky-400); /* 替换原来的 #60a5fa */
}

.assistant-msg .timestamp {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-right: 10px;
}

.assistant-msg .content {
    white-space: pre-wrap;
    word-break: break-word;
}

/* 思考块样式 */
.assistant-msg-thinking {
    background: color-mix(in srgb, var(--amber-400) 20%, transparent); /* 替换原来的 rgba(251, 191, 36, 0.1) */
    border-left-color: var(--amber-400); /* 替换原来的 #fbbf24 */
}

.thinking-header {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 4px 0;
}

.thinking-icon {
    font-size: 0.9rem;
}

.thinking-title {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.thinking-toggle {
    font-size: 0.7rem;
    transition: transform 0.2s;
    margin-left: auto;
}

.assistant-msg-thinking.expanded .thinking-toggle {
    transform: rotate(90deg);
}

.thinking-preview {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-top: 8px;
    font-style: italic;
}

.thinking-content {
    display: none;
    margin-top: 8px;
    font-size: 0.85rem;
    white-space: pre-wrap;
    color: var(--text-color);
}

.assistant-msg-thinking.expanded .thinking-content {
    display: block;
}

.assistant-msg-thinking.expanded .thinking-preview {
    display: none;
}

/* 工具调用样式 */
.assistant-msg-tool_use {
    background: color-mix(in srgb, var(--emerald-500) 20%, transparent); /* 替换原来的 rgba(16, 185, 129, 0.1) */
    border-left-color: var(--emerald-500); /* 替换原来的 #10b981 */
}

.tool-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.tool-icon {
    font-size: 1rem;
}

.tool-name {
    font-weight: 500;
    color: var(--emerald-500); /* 替换原来的 #10b981 */
}

.tool-input pre {
    margin: 0;
    padding: 8px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    font-size: 0.8rem;
    overflow-x: auto;
    max-height: 200px;
}

/* 工具结果样式 */
.assistant-msg-tool_result {
    background: color-mix(in srgb, var(--sky-700) 20%, transparent); /* 替换原来的 rgba(59, 130, 246, 0.1) */
    border-left-color: var(--sky-500); /* 替换原来的 #3b82f6 */
}

/* 通用工具结果样式 */
.result-label {
    font-size: 0.8rem;
    font-weight: 500;
    margin-right: 8px;
}

.result-content pre {
    margin: 8px 0 0 0;
    padding: 8px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    font-size: 0.8rem;
    overflow-x: auto;
    max-height: 200px;
    overflow-y: auto;
}

.result-truncated {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
    padding: 4px 8px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
    margin-top: 8px;
}

/* 空内容样式 */
.empty-content {
    color: var(--text-muted);
    font-style: italic;
}

/* ============== 示例任务视图 ============== */
.examples-body {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.examples-intro {
    color: var(--text-muted);
    margin-bottom: 8px;
    font-size: 0.95rem;
}

.example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
}

.btn-example-large {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 20px;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
}

.btn-example-large:hover {
    border-color: var(--primary-color);
    background: rgba(124, 58, 237, 0.1);
    transform: translateY(-2px);
}

.example-icon {
    font-size: 2rem;
    margin-bottom: 12px;
    color: var(--primary-color); /* 使用变量替代硬编码颜色 */
}

.example-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 8px;
}

.example-desc {
    font-size: 0.85rem;
    color: var(--text-muted);
}

/* ============== 历史记录视图 ============== */
.history-body {
    display: flex;
    flex-direction: column;
    gap: 20px;
    min-height: 0;
    flex: 1;
    overflow: hidden;  /* 防止外层滚动，让内部容器处理滚动 */
}

/* 历史记录页面的 page-body 覆盖默认样式 */
.page-body.history-body {
    overflow: hidden;  /* 防止外层滚动，让内部容器处理滚动 */
    padding: 0;  /* 移除默认 padding，由内部元素处理 */
}

.history-section {
    background: var(--card-bg);
    border-radius: 12px;
    border: 1px solid var(--border-color);
    overflow-y: auto;  /* 允许垂直滚动 */
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 200px;
}

.history-header {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 12px;
    background: var(--card-bg);
    flex-shrink: 0;
}

.history-header h2 {
    margin: 0;
    font-size: 1rem;
    color: var(--text-color);
}

.back-btn {
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--primary-color);
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s;
}

.back-btn:hover {
    background: var(--bg-color);
}

/* 分页控件 */
.pagination-bar {
    padding: 12px 16px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    background: var(--card-bg);
    flex-shrink: 0;
}

.pagination-info {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin: 0 8px;
}

.pagination-btn {
    background: var(--bg-color);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
}

.pagination-btn:hover:not(:disabled) {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.pagination-btn:disabled:hover {
    background: var(--bg-color);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* 项目列表容器（带滚动） */
.project-list-container {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 150px;
}

/* 会话列表容器（带滚动） */
.session-list-container {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 150px;
}

/* 项目列表 */
.project-list {
    min-height: 100px;
}

.loading-placeholder,
.empty-placeholder {
    padding: 40px;
    text-align: center;
    color: var(--text-muted);
}

.error-placeholder {
    padding: 40px;
    text-align: center;
    color: var(--error-color);
}

.project-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    transition: background 0.2s;
}

.project-item:last-child {
    border-bottom: none;
}

.project-item:hover {
    background: var(--bg-color);
}

.project-info {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
    min-width: 0;
    cursor: pointer;
}

/* 项目列表中的新会话按钮 */
.btn-new-project-session {
    padding: 8px 14px;
    background: transparent;
    border: 1px solid var(--primary-color);
    color: var(--primary-color);
    border-radius: 6px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    flex-shrink: 0;
    margin-left: 12px;
}

.btn-new-project-session:hover {
    background: var(--primary-color);
    color: white;
}

.project-path {
    font-size: 0.9rem;
    color: var(--text-color);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.project-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

.project-count {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.project-tools {
    font-size: 0.75rem;
    color: var(--sky-400); /* 替换原来的 #38bdf8 */
    background: color-mix(in srgb, var(--violet-600) 20%, transparent); /* 替换原来的 rgba(124, 58, 237, 0.1) */
    padding: 2px 8px;
    border-radius: 4px;
}

/* 会话列表 */
.session-list {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}

.session-item {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background 0.2s;
}

.session-item:last-child {
    border-bottom: none;
}

.session-item:hover {
    background: var(--bg-color);
}

.session-item.selected {
    background: rgba(124, 58, 237, 0.2);
    border-left: 3px solid var(--primary-color);
}

.session-title {
    font-size: 0.9rem;
    color: var(--text-color);
    margin-bottom: 6px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.session-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.session-actions {
    margin-top: 8px;
}

.btn-continue {
    padding: 6px 12px;
    font-size: 0.8rem;
}

/* ============== v0.5.5 SSE 连接状态指示器 ============== */
.connection-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background: var(--zinc-800);
    border-bottom: 1px solid var(--border-color);
    font-size: 0.85rem;
    transition: all var(--transition-normal);
}

.connection-indicator.state-connected {
    background: rgba(16, 185, 129, 0.1);
    border-bottom-color: var(--emerald-500);
}

.connection-indicator.state-connecting {
    background: rgba(251, 191, 36, 0.1);
    border-bottom-color: var(--amber-500);
}

.connection-indicator.state-disconnected {
    background: rgba(113, 113, 122, 0.1);
    border-bottom-color: var(--zinc-500);
}

.connection-indicator.state-reconnecting {
    background: rgba(251, 191, 36, 0.15);
    border-bottom-color: var(--amber-500);
    animation: pulse-reconnect 2s ease-in-out infinite;
}

@keyframes pulse-reconnect {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.connection-status-dot {
    font-size: 0.75rem;
    line-height: 1;
}

.connection-status-text {
    color: var(--text-secondary);
    font-weight: 500;
}

.connection-indicator.state-connected .connection-status-text {
    color: var(--emerald-400);
}

.connection-indicator.state-connecting .connection-status-text,
.connection-indicator.state-reconnecting .connection-status-text {
    color: var(--amber-400);
}

.connection-indicator.state-disconnected .connection-status-text {
    color: var(--zinc-400);
}

.connection-retry-info {
    color: var(--text-muted);
    font-size: 0.8rem;
    margin-left: 4px;
}

.connection-reconnect-btn {
    margin-left: auto;
    padding: 4px 12px;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.connection-reconnect-btn:hover {
    background: var(--primary-hover);
}

/* ============== v0.5.2 可复用组件样式 ============== */

/* ============== CopyButton 复制按钮 ============== */
.copy-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    border: none;
    border-radius: var(--radius-sm);
    background: transparent;
    color: var(--zinc-500);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.copy-btn:hover {
    background: color-mix(in srgb, var(--zinc-700) 50%, transparent);
    color: var(--zinc-300);
}

.copy-btn.copied {
    color: var(--emerald-400);
}

.copy-btn .copy-icon,
.copy-btn .copy-success {
    font-size: 12px;
    line-height: 1;
}

/* ============== CollapsiblePanel 可折叠面板 ============== */
.collapsible-panel {
    border-radius: var(--radius-md);
    overflow: hidden;
    background: color-mix(in srgb, var(--zinc-800) 30%, transparent);
    border: 1px solid color-mix(in srgb, var(--zinc-700) 50%, transparent);
}

.collapsible-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
    transition: background var(--transition-fast);
}

.collapsible-header:hover {
    background: color-mix(in srgb, var(--zinc-700) 30%, transparent);
}

.collapsible-header-content {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
    min-width: 0;
}

.collapsible-icon {
    font-size: 14px;
    flex-shrink: 0;
}

.collapsible-title {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--zinc-300);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.collapsible-toggle {
    font-size: 10px;
    color: var(--zinc-500);
    transition: transform var(--transition-normal);
    margin-left: auto;
}

.collapsible-panel.expanded .collapsible-toggle {
    transform: rotate(90deg);
}

.collapsible-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height var(--transition-slow) ease-out;
}

.collapsible-panel.expanded .collapsible-content {
    max-height: 2000px;
}

.collapsible-content > *:first-child {
    margin-top: 0;
}

.collapsible-content > *:last-child {
    margin-bottom: 0;
}

/* ============== ScrollToBottomButton 滚动到底部按钮 ============== */
.scroll-to-bottom-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: color-mix(in srgb, var(--zinc-200) 90%, transparent);
    color: var(--zinc-900);
    border: none;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(8px);
    transition: all var(--transition-fast);
}

.scroll-to-bottom-btn:hover {
    background: var(--zinc-100);
    transform: translateY(-1px);
}

.scroll-to-bottom-btn .scroll-icon {
    font-size: 12px;
    line-height: 1;
}

.scroll-to-bottom-fixed {
    position: absolute;
    bottom: 16px;
    right: 16px;
    z-index: 100;
}

/* ============== MarkdownRenderer Markdown 渲染 ============== */
.markdown-body {
    font-size: 13px;
    line-height: 1.6;
    color: var(--zinc-200);
    word-break: break-word;
}

/* 标题样式 */
.markdown-body .markdown-h1,
.markdown-body .markdown-h2,
.markdown-body .markdown-h3,
.markdown-body .markdown-h4,
.markdown-body .markdown-h5,
.markdown-body .markdown-h6 {
    color: var(--zinc-100);
    font-weight: 600;
}

.markdown-body .markdown-h1 { font-size: 1rem; margin-top: 12px; margin-bottom: 6px; }
.markdown-body .markdown-h2 { font-size: 0.9rem; margin-top: 12px; margin-bottom: 6px; }
.markdown-body .markdown-h3 { font-size: 0.85rem; margin-top: 12px; margin-bottom: 6px; }
.markdown-body .markdown-h4,
.markdown-body .markdown-h5,
.markdown-body .markdown-h6 { font-size: 0.8rem; margin-top: 8px; margin-bottom: 4px; }

/* 段落样式 */
.markdown-body .markdown-p {
    margin: 8px 0;
    white-space: pre-wrap;
}

/* 链接样式 */
.markdown-body .markdown-link {
    color: var(--cyan-400);
    text-decoration: underline;
    text-underline-offset: 2px;
    transition: color var(--transition-fast);
}

.markdown-body .markdown-link:hover {
    color: var(--cyan-300);
}

/* 强调样式 */
.markdown-body .markdown-strong {
    font-weight: 600;
    color: var(--zinc-50);
}

.markdown-body .markdown-em {
    font-style: italic;
    color: var(--zinc-200);
}

/* 行内代码样式 */
.markdown-body .markdown-code-inline {
    padding: 2px 6px;
    background: rgba(39, 39, 42, 0.8);
    color: var(--cyan-300);
    font-size: 12px;
    font-family: 'Consolas', 'Monaco', monospace;
    border-radius: var(--radius-sm);
}

/* 代码块样式 */
.markdown-body .markdown-code-block {
    position: relative;
    margin: 8px 0;
    border-radius: var(--radius-md);
    overflow: hidden;
    border: 1px solid rgba(63, 63, 70, 0.5);
}

.markdown-body .markdown-code-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 4px 12px;
    background: var(--zinc-900);
    border-bottom: 1px solid rgba(63, 63, 70, 0.5);
}

.markdown-body .markdown-code-lang {
    font-size: 10px;
    color: var(--zinc-500);
    font-family: 'Consolas', 'Monaco', monospace;
}

.markdown-body .markdown-pre {
    margin: 0;
    padding: 12px;
    background: rgba(9, 9, 11, 0.8);
    overflow-x: auto;
}

.markdown-body .markdown-pre code {
    font-size: 12px;
    color: var(--zinc-300);
    font-family: 'Consolas', 'Monaco', monospace;
    white-space: pre;
}

/* 列表样式 */
.markdown-body .markdown-ul,
.markdown-body .markdown-ol {
    margin: 8px 0;
    padding-left: 20px;
    color: var(--zinc-200);
}

.markdown-body .markdown-ul {
    list-style-type: disc;
}

.markdown-body .markdown-ol {
    list-style-type: decimal;
}

.markdown-body .markdown-li {
    margin: 4px 0;
    line-height: 1.5;
}

/* 引用块样式 */
.markdown-body .markdown-blockquote {
    margin: 8px 0;
    padding-left: 12px;
    border-left: 2px solid var(--zinc-600);
    color: var(--zinc-400);
    font-style: italic;
}

/* 水平线样式 */
.markdown-body .markdown-hr {
    margin: 16px 0;
    border: none;
    border-top: 1px solid var(--zinc-700);
}

/* 表格样式 */
.markdown-body .markdown-table-wrapper {
    margin: 8px 0;
    overflow-x: auto;
    border-radius: var(--radius-md);
    border: 1px solid rgba(63, 63, 70, 0.5);
}

.markdown-body .markdown-table {
    width: 100%;
    font-size: 13px;
    border-collapse: collapse;
}

.markdown-body .markdown-thead {
    background: var(--zinc-900);
}

.markdown-body .markdown-tr {
    border-bottom: 1px solid rgba(63, 63, 70, 0.5);
}

.markdown-body .markdown-tr:last-child {
    border-bottom: none;
}

.markdown-body .markdown-th {
    padding: 8px 12px;
    text-align: left;
    font-weight: 500;
    color: var(--zinc-200);
}

.markdown-body .markdown-td {
    padding: 8px 12px;
    color: var(--zinc-300);
}

/* ============== v0.5.6 虚拟滚动样式 ============== */

/* 虚拟列表容器 */
.virtual-list-wrapper {
    position: relative;
    width: 100%;
    min-height: 100%;
}

.virtual-list-content {
    position: relative;
    width: 100%;
}

/* 虚拟列表项 */
.virtual-list-item {
    position: absolute;
    left: 0;
    right: 0;
    box-sizing: border-box;
}

/* 加载指示器 */
.virtual-list-loader {
    padding: 16px;
    text-align: center;
    color: var(--text-muted, #888);
    font-size: 0.85rem;
}

/* 加载更多提示 */
.load-more-hint {
    display: inline-block;
    margin-left: 8px;
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* 项目/会话列表容器优化 */
.project-list-container,
.session-list-container {
    position: relative;
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 150px;
    scroll-behavior: smooth;
}

/* 虚拟滚动时的列表项优化 */
.project-item.virtual-list-item,
.session-item.virtual-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    transition: background 0.2s;
    background: transparent;
}

.project-item.virtual-list-item:hover,
.session-item.virtual-list-item:hover {
    background: var(--bg-color);
}

/* 空列表和加载状态 */
.virtual-list-empty {
    padding: 40px;
    text-align: center;
    color: var(--text-muted);
}

.virtual-list-loading {
    padding: 20px;
    text-align: center;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.virtual-list-loading::before {
    content: '';
    width: 16px;
    height: 16px;
    border: 2px solid var(--border-color);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* 滚动条样式优化（用于虚拟滚动容器） */
.project-list-container::-webkit-scrollbar,
.session-list-container::-webkit-scrollbar {
    width: 6px;
}

.project-list-container::-webkit-scrollbar-track,
.session-list-container::-webkit-scrollbar-track {
    background: transparent;
}

.project-list-container::-webkit-scrollbar-thumb,
.session-list-container::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 3px;
}

.project-list-container::-webkit-scrollbar-thumb:hover,
.session-list-container::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
}

/* ============== v0.6.4 任务调度样式 ============== */

/* 调度器状态栏 */
.scheduler-status-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: color-mix(in srgb, var(--zinc-900) 70%, transparent);
    border: 1px solid color-mix(in srgb, var(--zinc-700) 50%, transparent);
    border-radius: var(--radius-lg);
    margin-bottom: 16px;
    flex-wrap: wrap;
    gap: 12px;
}

.scheduler-status-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.scheduler-status-icon {
    font-size: 1.2rem;
}

.scheduler-status-icon.running {
    color: #4CAF50;
}

.scheduler-status-icon.stopped {
    color: var(--text-muted);
}

.scheduler-status-text {
    font-weight: 500;
    color: var(--text-primary);
}

.scheduler-stats {
    display: flex;
    gap: 24px;
}

.scheduler-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.scheduler-stat .stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
}

.scheduler-stat .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.scheduler-actions {
    display: flex;
    gap: 8px;
}

/* 标签页导航 */
.scheduler-tabs {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: color-mix(in srgb, var(--zinc-900) 50%, transparent);
    border-radius: var(--radius-lg);
    margin-bottom: 16px;
}

.scheduler-tab {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: transparent;
    border: none;
    border-radius: var(--radius);
    color: var(--text-muted);
    cursor: pointer;
    transition: all var(--transition-normal);
}

.scheduler-tab:hover {
    background: color-mix(in srgb, var(--zinc-700) 30%, transparent);
    color: var(--text-primary);
}

.scheduler-tab.active {
    background: var(--primary-color);
    color: white;
}

.scheduler-tab .tab-icon {
    font-size: 1rem;
}

.scheduler-tab .tab-text {
    font-size: 0.875rem;
}

/* 内容区域 */
.scheduler-content {
    min-height: 400px;
}

.scheduler-tab-pane {
    display: none;
}

.scheduler-tab-pane.active {
    display: block;
}

/* 操作栏 */
.scheduler-actions-bar {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}

/* 任务列表 */
.scheduler-list {
    background: color-mix(in srgb, var(--zinc-900) 70%, transparent);
    border: 1px solid color-mix(in srgb, var(--zinc-700) 50%, transparent);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.scheduler-table {
    width: 100%;
    border-collapse: collapse;
}

.scheduler-table th,
.scheduler-table td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid color-mix(in srgb, var(--zinc-700) 30%, transparent);
}

.scheduler-table th {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-muted);
    text-transform: uppercase;
    background: color-mix(in srgb, var(--zinc-800) 30%, transparent);
}

.scheduler-table td {
    font-size: 0.875rem;
    color: var(--text-primary);
}

.scheduler-table tr:last-child td {
    border-bottom: none;
}

.scheduler-table tr:hover td {
    background: color-mix(in srgb, var(--zinc-800) 20%, transparent);
}

.scheduler-table .task-prompt {
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.scheduler-table .actions {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
}

/* 状态标签 */
.status-badge {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
}

.status-badge.enabled {
    background: color-mix(in srgb, #4CAF50 20%, transparent);
    color: #4CAF50;
}

.status-badge.disabled {
    background: color-mix(in srgb, var(--zinc-600) 20%, transparent);
    color: var(--text-muted);
}

/* 状态图标 */
.status-icon {
    font-size: 1rem;
}

.status-icon.running {
    color: #2196F3;
}

.status-icon.completed {
    color: #4CAF50;
}

.status-icon.failed {
    color: #F44336;
}

.status-icon.pending {
    color: #FF9800;
}

.status-icon.cancelled {
    color: #9E9E9E;
}

/* 空状态 */
.empty-state {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 48px;
    color: var(--text-muted);
    font-size: 0.875rem;
}

.error-state {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 48px;
    color: #F44336;
    font-size: 0.875rem;
}

/* 分页控件 */
.pagination-bar {
    margin-top: 16px;
}

.pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.pagination-btn {
    padding: 6px 12px;
    background: color-mix(in srgb, var(--zinc-800) 50%, transparent);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 0.875rem;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.pagination-btn:hover:not(:disabled) {
    background: var(--primary-color);
    border-color: var(--primary-color);
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.pagination-info {
    font-size: 0.875rem;
    color: var(--text-muted);
}

/* Cron 输入组 */
.cron-input-group {
    display: flex;
    gap: 8px;
}

.cron-input-group .form-input {
    flex: 1;
}

.cron-preview {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    padding: 8px 12px;
    background: color-mix(in srgb, var(--zinc-800) 30%, transparent);
    border-radius: var(--radius);
}

.cron-preview-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.cron-preview-value {
    font-size: 0.875rem;
    color: var(--primary-color);
    font-weight: 500;
}

.cron-error {
    margin-top: 8px;
    padding: 8px 12px;
    background: color-mix(in srgb, #F44336 10%, transparent);
    border-radius: var(--radius);
    color: #F44336;
    font-size: 0.875rem;
}

/* Cron 帮助对话框 */
.cron-help-content {
    max-height: 400px;
    overflow-y: auto;
}

.cron-help-intro {
    margin-bottom: 16px;
    color: var(--text-muted);
}

.cron-format-section {
    margin-bottom: 20px;
}

.cron-format-section h3 {
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 8px;
}

.cron-format {
    display: block;
    padding: 12px;
    background: color-mix(in srgb, var(--zinc-800) 50%, transparent);
    border-radius: var(--radius);
    font-family: monospace;
    font-size: 1rem;
    text-align: center;
    letter-spacing: 2px;
}

.cron-field-desc {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.cron-examples-section h3 {
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 8px;
}

.cron-examples-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.cron-example-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    background: color-mix(in srgb, var(--zinc-800) 30%, transparent);
    border-radius: var(--radius);
    cursor: pointer;
    transition: all var(--transition-normal);
}

.cron-example-item:hover {
    background: color-mix(in srgb, var(--zinc-700) 30%, transparent);
}

.cron-example-expr {
    font-family: monospace;
    font-size: 0.875rem;
    color: var(--primary-color);
    min-width: 100px;
}

.cron-example-desc {
    font-size: 0.875rem;
    color: var(--text-primary);
}

/* 任务详情对话框 */
.dialog-content-large {
    max-width: 700px;
}

.task-detail-content {
    max-height: 60vh;
    overflow-y: auto;
}

.detail-section {
    margin-bottom: 16px;
}

.detail-section-title {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 8px;
}

.detail-section-content {
    font-size: 0.875rem;
    color: var(--text-primary);
    word-break: break-word;
}

.detail-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
}

.collapse-icon {
    font-size: 0.75rem;
    color: var(--text-muted);
    transition: transform var(--transition-normal);
}

.collapsible-content {
    max-height: 300px;
    overflow-y: auto;
}

.collapsible-content.collapsed {
    max-height: 0;
    overflow: hidden;
    padding-top: 0;
    padding-bottom: 0;
}

.task-output-pre {
    font-family: monospace;
    font-size: 0.8rem;
    white-space: pre-wrap;
    word-break: break-word;
    background: color-mix(in srgb, var(--zinc-900) 50%, transparent);
    padding: 12px;
    border-radius: var(--radius);
    max-height: 250px;
    overflow-y: auto;
}

.error-title {
    color: #F44336 !important;
}

.error-content {
    background: color-mix(in srgb, #F44336 10%, transparent);
    padding: 12px;
    border-radius: var(--radius);
    color: #F44336;
}

.error-text {
    color: #F44336;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* 工具标签 */
.tool-tag {
    display: inline-block;
    padding: 2px 8px;
    background: color-mix(in srgb, var(--primary-color) 20%, transparent);
    color: var(--primary-color);
    border-radius: 9999px;
    font-size: 0.75rem;
    margin-right: 4px;
}

/* 文件项 */
.file-item {
    padding: 4px 0;
    font-family: monospace;
    font-size: 0.8rem;
}

/* 响应式 - 768-1024px 紧凑表格 */
@media (max-width: 1024px) and (min-width: 769px) {
    .scheduler-table th,
    .scheduler-table td {
        padding: 8px 12px;
    }

    .scheduler-table .task-prompt {
        max-width: 250px;
    }

    .scheduler-status-bar {
        flex-wrap: wrap;
        gap: 12px;
    }

    .scheduler-stats {
        gap: 16px;
    }
}

/* 响应式 - < 768px 卡片式列表 */
@media (max-width: 768px) {
    .scheduler-status-bar {
        flex-direction: column;
        align-items: stretch;
    }

    .scheduler-stats {
        justify-content: center;
    }

    .scheduler-actions {
        justify-content: center;
    }

    .scheduler-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .scheduler-tab .tab-text {
        display: none;
    }

    .scheduler-table {
        display: block;
    }

    .scheduler-table thead {
        display: none;
    }

    .scheduler-table tbody {
        display: block;
    }

    .scheduler-table tr {
        display: block;
        margin-bottom: 12px;
        border: 1px solid color-mix(in srgb, var(--zinc-700) 50%, transparent);
        border-radius: var(--radius);
    }

    .scheduler-table td {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        border-bottom: 1px solid color-mix(in srgb, var(--zinc-700) 30%, transparent);
    }

    .scheduler-table td:last-child {
        border-bottom: none;
    }

    .scheduler-table td::before {
        content: attr(data-label);
        font-weight: 500;
        color: var(--text-muted);
    }

    .scheduler-table .task-prompt {
        max-width: none;
    }

    .scheduler-table .actions {
        justify-content: flex-end;
    }
}
